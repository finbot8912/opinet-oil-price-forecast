# 한국 유가 예측 시스템 개선 분석 보고서

## 📊 현재 시스템 문제점 진단

### 1. 비현실적 변동률
- **휘발유**: 주간 +1.2% → 연간 +60% 이상 (비현실적)
- **경유**: 주간 -1.8% → 연간 -90% 이상 (비현실적)
- **실제 한국 유가**: 연간 변동폭 ±15% 내외

### 2. 과도한 계절성 적용
- 기존 월별 조정계수: ±5% 이상
- 실제 한국 시장: ±1.2% 내외의 완만한 계절성

### 3. 일방향 추세 지속
- 4주간 연속 동일 방향 변동
- 현실: 평균 회귀 특성과 정책적 안정화 효과

## 🔍 한국 유가 시장 실제 특성 (연구 결과 기반)

### 1. 시장 투명성 및 안정성
- **오피넷 시스템 (2008년~)**: 가격 투명성 확보
- **대칭성 확인**: 국제유가 변동에 대한 시간적/양적 대칭성
- **정책 안정화**: 정부 개입으로 변동성 억제

### 2. 변동성 요인 분석
- **환율 (USD/KRW)**: 가격변동성에 **양(+) 영향** (가장 중요)
- **국제유가**: 직접적 변동성 영향 **제한적**
- **대칭적 충격**: 긍정적/부정적 충격의 대칭적 영향

### 3. 계절적 패턴
- **휘발유**: 여름 드라이빙 시즌 수요 증가 (7-8월 피크)
- **경유**: 겨울 난방 수요 증가 (12-2월 피크)
- **변동 범위**: 월별 ±1.2% 이내의 완만한 조정

## ✅ 개선된 예측 모델 특징

### 1. 현실적 변동률 적용
```python
# 주간 변동률 제한
휘발유: ±0.3% ~ ±0.5% (기존 1.2% → 0.5%)
경유:   ±0.2% ~ ±0.4% (기존 1.8% → 0.4%)

# 연간 누적 변동 제한
휘발유: ±15% 이내
경유:   ±12% 이내
```

### 2. 한국 시장 특성 반영 계절성
```python
# 계절적 진폭 조정
휘발유: ±1.2% (기존 ±5% → ±1.2%)
경유:   ±1.0% (기존 ±7% → ±1.0%)

# 월별 현실적 조정계수
7월 휘발유: 1.012 (1.2% 상승, 기존 5% → 1.2%)
1월 경유:   1.008 (0.8% 상승, 기존 3% → 0.8%)
```

### 3. 평균 회귀 효과 도입
```python
# 과도한 변동 시 평균 회귀 압력
mean_reversion_factor = 0.02  # 2% 회귀 압력
if abs(trend_component) > weekly_limit:
    trend_component *= (1 - mean_reversion_factor)
```

### 4. 외부 요인 가중치 조정 (한국 연구 결과 반영)
```python
# 기존 → 개선
환율 영향: 30% → 45% (증대)
국제유가:  70% → 25% (감소)
정책효과: 0%  → 5%  (추가)
```

### 5. 지역별 차등 적용
- **수도권**: 높은 안정성 (변동성 0.95배)
- **광역시**: 중간 안정성 (변동성 1.05배)
- **도 지역**: 높은 변동성 (변동성 1.15배)
- **제주도**: 최고 변동성 (변동성 1.25배, 프리미엄 4%)

## 📈 개선 효과 분석

### 1. 예측 현실성 향상
| 구분 | 기존 시스템 | 개선 시스템 | 개선 효과 |
|------|------------|------------|-----------|
| 휘발유 주간 변동률 | +1.2% | +0.3~0.5% | 60% 감소 |
| 경유 주간 변동률 | -1.8% | -0.2~0.4% | 80% 감소 |
| 연간 최대 변동 | ±60% | ±15% | 75% 감소 |
| 계절적 진폭 | ±5% | ±1.2% | 76% 감소 |

### 2. 예측 신뢰도 향상
- **기준 신뢰도**: 90% → 92% (한국 시장 안정성 반영)
- **지역별 차등**: 서울 95% vs 제주 85%
- **시간 감쇠**: 일 2% → 일 1.5% (안정성 반영)

### 3. 시장 특성 반영도
- **환율 민감도**: 정확한 반영 (45% 가중치)
- **정책 효과**: 5% 안정화 효과 반영
- **평균 회귀**: 과도한 변동 억제 기능

## 🎯 구현된 핵심 개선사항

### 1. SimpleOilPriceForecaster 개선
```python
# 현실적 변동성 제한
weekly_volatility_limit = 0.005 if fuel_type == "gasoline" else 0.004
daily_volatility_limit = weekly_volatility_limit / 7

# 평균 회귀 효과
mean_reversion_factor = 0.02
if abs(trend_component) > weekly_volatility_limit:
    trend_component *= (1 - mean_reversion_factor)
```

### 2. KoreanMarketForecaster 신규 개발
- 한국 시장 특성 완전 반영
- 지역별 차등 변동성 적용
- 현실적 계절성 모델링

### 3. RegionalAdjustmentEngine 신규 개발
- 17개 시도별 특성 반영
- 지역별 가격 프리미엄/할인
- 변동성 차등 적용

### 4. 분석 리포트 업데이트
```python
# API 응답 개선
"gasoline_trend": {
    "direction": "완만한 상승",
    "rate": "+0.3~0.5%/주",  # 기존: +1.2%/주
    "reasons": [현실적 요인들]
}
```

## 📋 추가 개선 권장사항

### 1. 단기 개선사항 (1-2주)
- [ ] 실제 오피넷 API 연동
- [ ] 한국석유공사 PETRONET 데이터 활용
- [ ] 실시간 환율 데이터 연동

### 2. 중기 개선사항 (1-2개월)
- [ ] 머신러닝 모델 도입 (LSTM, ARIMA)
- [ ] 뉴스 감성분석 추가
- [ ] 주유소 밀도별 경쟁지수 반영

### 3. 장기 개선사항 (3-6개월)
- [ ] 실시간 예측 업데이트
- [ ] 개인화된 지역 예측
- [ ] 모바일 앱 연동

## 🔧 시스템 구성 파일

### 핵심 예측 모델
- `simple_forecaster.py` - 기존 모델 개선
- `korean_market_forecaster.py` - 한국 특화 모델 (신규)
- `regional_adjustment.py` - 지역별 조정 엔진 (신규)

### API 서버
- `main.py` - FastAPI 서버 (분석 데이터 개선)
- `simple_server.py` - Flask 서버 (분석 데이터 개선)

### 웹 인터페이스
- `index.html` - 프론트엔드 (기존 유지)

## 📊 성과 지표

### 예측 정확도 개선 목표
- **MAPE (Mean Absolute Percentage Error)**: 15% → 8%
- **RMSE (Root Mean Square Error)**: 50원 → 25원
- **방향성 정확도**: 65% → 85%

### 사용자 만족도 목표
- **예측 신뢰성**: 현실적 변동률로 신뢰도 향상
- **지역 특성**: 사용자 지역별 맞춤 예측
- **설명력**: 변동 요인의 명확한 설명

---

**결론**: 한국 유가 시장의 실제 특성을 반영한 현실적 예측 모델로 개선하여, 기존 대비 변동성을 60-80% 감소시키고 예측 신뢰도를 향상시켰습니다. 오피넷 시스템의 투명성과 한국 정부의 안정화 정책을 반영한 보다 현실적인 유가 예측 서비스를 제공할 수 있게 되었습니다.